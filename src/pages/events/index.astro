---
import Layout from '../../layouts/Layout.astro';
import { getLatestEvent, getEvents, getEvent } from '../../utils/fetchData';
import ArchivedEventCard from '../../components/events/ArchivedEventCard.astro';
import Icon from 'astro-icon';

const events = await getLatestEvent();
const allEvents = await getEvents();

const startdateLatest = events.startDate;
const enddateLatest = events.endDate;

const date = startdateLatest.getDate();
const dateend = enddateLatest.getDate();

var date1 = date.toString();
var date2 = dateend.toString();

if (date < 9 ) {
    date1 = "0"+date1;
} else if (dateend < 9){
    date2 = "0"+date2;
} else {
    date1 = date.toString();
    date2 = dateend.toString();
}

const year = startdateLatest.getFullYear();
const month = startdateLatest.toLocaleString('default', { month:'short'});
const monthend = enddateLatest.toLocaleString('default', { month:'short'});


---

<Layout title="Events | GDSC MPSTME">
  <main class="flex-1 overflow-x-hidden">
    <div class="flex flex-col relative mt-10 -mb-44 z-10 bg-purple-300 p-10 w-5/6 mx-auto rounded-3xl lg:p-6">
      <!-- <div class="flex flex-col text-4xl text-purple-900 ml-auto lg:text-3xl">
          <p class="ml-auto">{date} - {dateend}</p>
      </div>
      <div class="text-purple-900 ml-auto">
        <p class="ml-auto text-md uppercase tracking-[.30em] lg:text-lg lg:ml-14">{month}</p>
      </div> -->
      <div class="flex text-purple-900 ml-auto">
        <div class="flex flex-col">
            <p class="text-4xl">{date1}</p>
            <p class="ml-auto text-lg tracking-wider uppercase">{month}</p>
        </div>
        <span class="text-4xl">&nbsp;-&nbsp;</span>
        <div class="flex flex-col">
            <p class="text-4xl">{date2}</p>
            <p class="ml-auto text-lg tracking-wider uppercase">{monthend}</p>
        </div>
      </div>
      <div class="flex flex-col lg:flex-row">
          <div class="lg:w-1/2">
              <img class="-mb-10" src={events.imgUrl} alt="">
          </div>
          <div class="flex flex-col lg:w-3/4 lg:justify-center lg:pr-12">
              <p class="text-3xl text-center font-bold mb-5 mx-auto lg:mx-0 lg:text-4xl lg:text-left">{events.name}</p>
              <p class="text-lg w-2/5 mx-auto px-2 text-center rounded-full text-white bg-purple-700 mb-5 lg:w-1/6 lg:mx-0 ">{events.tags}</p>
              <p class="text-xl text-center mb-5 lg:text-lg lg:text-left">{events.summary}</p>
              <div class="flex flex-col text-center lg:flex-row">
                  <a class="flex justify-center px-3 py-2 bg-purple-700 text-white mb-3 lg:mb-0 lg:mr-3 lg:w-1/3" href={`/events/${events.slug}`}>More Details
                    <Icon name="carbon:chevron-right" class="h-6" /></a>
                  <a class="flex justify-center px-3 py-2 border-2 border-purple-700 lg:mb-0 lg:w-1/3" href={events.registrationLink}>Register
                    <Icon name="carbon:chevron-right" class="h-6" /></a>
              </div>
          </div>
      </div>
      <img class="hidden lg:block absolute w-24 -top-10 -left-10" src="./decorations/code.svg" alt="">
      <img class="hidden lg:block absolute w-24 bottom-24 transform rotate-12 -right-10" src="./decorations/lines-green.svg" alt="">
  </div>
  
  <div class="clip_top relative bg-yellow-400 bg-opacity-20 p-8 lg:px-32 lg:pt-16 lg:pb-44">
      
      <div class="mt-44">
          <div class="flex flex-col">
              <p class="text-xl font-bold text-blue-500">Events Archive</p>
              <p class="text-2xl font-bold">Successful, Memorable Events Organized So Far</p>
          </div>
          <div class="horizontal-scrollbar flex py-8 overflow-x-scroll gap-10 lg:gap-14">
              {
                allEvents.map(event =>(
                  <a href={`/events/${event.slug}`}>
                    <ArchivedEventCard date={event.startDate.getDate()} month={event.startDate.toLocaleString('default', { month:'short'})} year={event.startDate.getFullYear()}  imgsrc={event.imgUrl} title={event.name} descr={event.summary}/>
                  </a>
                ))
              }
          </div>
      </div>  
  </div>
  
  
  
  <div class="clip_bottom relative z-10 flex flex-col p-8 bg-red-100 lg:px-32 lg:py-16">
      <div class="mb-24">
          <div class="mb-6">
              <p class="text-xl font-bold text-blue-500"> 
                  Partner
              </p>
              <p class="text-2xl font-bold">
                  Our Partner Enables Us To Give Our Best
              </p>
          </div>
          <div class="flex flex-col lg:flex-row lg:items-center">
              <img class="mx-auto mb-6 lg:mr-10" src="./images/wolfram-research-logo.png" alt="">
              <div class="text-center lg:text-left">
                  <p class="text-2xl mb-2 font-bold">
                      Wolfram Research, Inc.
                  </p>
                  <p class="text-lg">
                      Founded by Stephen Wolfram in 1987, Wolfram Research is one of the world's most respected computer, web and cloud software companiesâ€”as well as a powerhouse of scientific and technical innovation. As a pioneer in computation and computational knowledge, we have pursued a long-term vision to develop the science, technology and tools to make computation an ever-more-potent force in today's and tomorrow's world.
                  </p>
              </div>
          </div>
      </div>
      
  </div>
  <div class="h-24">

  </div>
    <img class="hidden absolute lg:block  z-30 w-64 right-0 -bottom-[170vh] " src="./decorations/dots-red.svg" alt=""> <!-- -bottom-28 -->
    <img class="hidden lg:block w-32 absolute z-30 -bottom-[245vh] left-[20vw] " src="./decorations/globe-green.svg" alt="">
    <img class="hidden lg:block w-28 absolute z-30 -bottom-[240vh] left-[35vw]" src="./decorations/book-red.svg" alt="">
    <img class="hidden lg:block w-22 absolute z-30 -bottom-[235vh] left-1/2" src="./decorations/apple-yellow.svg" alt="">
    <img class="hidden lg:block w-32 absolute z-30 -bottom-[235vh] right-1/4" src="./decorations/set-square-blue.svg" alt="">


  <style>
      .horizontal-scrollbar::-webkit-scrollbar {
          width: 5px;
          height: 8px;
          background-color: rgb(255, 255, 255);
          border-radius: 10px;
      }
      .horizontal-scrollbar::-webkit-scrollbar:vertical {
          display: none;
      }
      .horizontal-scrollbar::-webkit-scrollbar-thumb:horizontal {
          background: rgba(251, 191, 14, 1);
          border-radius: 10px;
      }
      .clip_top{
          clip-path: polygon(0 10%, 100% 0%, 100% 100%, 0% 100%);
      }
      .clip_bottom{
          clip-path: polygon(0 0, 100% 0%, 100% 92%, 0% 100%);
      }
  </style>
  </main>
</Layout>
